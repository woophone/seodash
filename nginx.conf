server {
    listen 80;
    server_name _;
    root /usr/share/nginx/html;
    index index.html;

    # Block all search engines via header (belt-and-suspenders with robots.txt + meta tags)
    add_header X-Robots-Tag "noindex, nofollow, noarchive, nosnippet" always;

    # Root dashboard — password protected (owner only)
    location = / {
        auth_basic "SEO Dashboard";
        auth_basic_user_file /etc/nginx/.htpasswd;
        try_files $uri $uri/ =404;
    }

    location = /index.html {
        auth_basic "SEO Dashboard";
        auth_basic_user_file /etc/nginx/.htpasswd;
    }

    # Everything else (client pages, assets, robots.txt) — no auth
    location / {
        try_files $uri $uri/ =404;
    }
}
